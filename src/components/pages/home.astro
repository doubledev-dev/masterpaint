---
import { getCollection } from "astro:content";
import { getLangFromUrl } from "@/i18n/utils";

import MainLayout from "@/layouts/MainLayout.astro";
import Hero from "@/components/Hero.astro";
import SmallServices from "@/components/Service/SmallServicesContainer.astro";
import Contact from "@/components/ContactForm.tsx";
import Achievements from "@/components/AchievementContainer.astro";
import Logos from "@/components/LogoHomePage.astro";
import Companies from "@/components/CompanyContainer.astro";
import Projects from "@/components/Projects";

const projects = (await getCollection("projects"))
  .filter((a) => a.data.parity < 0)
  .sort((a, b) => a.data.parity - b.data.parity);

const lang = getLangFromUrl(Astro.url);
---

<MainLayout>
  <Hero slot="before-main" />
  <SmallServices />
  <Logos />
  <Achievements />
  <Projects
    slice={true}
    homePage={true}
    projectsPage={false}
    slugItems={projects}
    lang={lang}
    client:load
  />
  <Companies />
  <Contact slot="after-main" />
</MainLayout>
